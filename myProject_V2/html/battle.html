<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/battle.css">
</head>

<body>
    <main id="mainArea">
        <div id="topArea">
            <div>
                <!-- <audio controls autoplay="" >
                    <source src="../audio/battle.mp3" type="audio/mp3">
                </audio> -->
            </div>

            <div>
                <p id="topInfo"></p>
            </div>

        </div>
        <div id="midArea">
            <div id="midAreaLeft">
                <img id="leftImg" src="../image/monster01V1.png" alt="">
            </div>
            <div id="midAreaMid">
                <img id="centerImg" style="display:block" src="../image/BOSSV1.png" alt="">
                <img id='hitEffect01' style="display:block" src="" alt="">
            </div>

            <div id="midAreaRight">
                <img id="rightImg" src="../image/BOSS02V1.jpg.png" alt="">
            </div>
        </div>
        <div id="bottomArea">
            <div id="battleList">
                <div><button id="normalFight" onclick="hitBtn()">攻擊</button></div>
                <div>
                    <button>物品</button>
                    <button>奇門</button>
                </div>
                <div><button>逃跑</button></div>

            </div>
            <div id="roleList">
                <div id="mainRoleplay">
                    <img src="../image/MainRole2V1.png" alt="">
                </div>
                <div id="anotherRoleplay01">
                    <img src="../image/anotherrole01V2.png" alt="">

                </div>
                <div id="anotherRoleplay02">
                    <img src="../image/anotherrole02V1.png" alt="">
                </div>
            </div>
            <div>???</div>



        </div>

    </main>
    <script>
        // 攻擊特效，把攻擊特效存成陣列，再隨機取用
        // let x = document.getElementById('centerImg');
        // x.addEventListener('click',hitaaa); //測試是否正常顯示特效
        var y = document.getElementById('normalFight');
        var z = document.getElementById('centerImg');
        console.log(window.getComputedStyle(z).getPropertyValue('opacity'));
        console.log(window.getComputedStyle(z));

        function hitEffect() {
            let hitEffectSrc = ['../image/hit_01V3.gif', '../image/hit_02V3.gif', '../image/hit_03V3.gif']
            myEffect = document.getElementById('hitEffect01').setAttribute('src', hitEffectSrc[Math.floor(Math.random() * 3)])
        }
        // 因為特效結束後會有殘影留在圖上，所以要再把特效圖片清空
        function clearEffect() {
            document.getElementById('hitEffect01').setAttribute('src', '');
        }


        function hitaaa() {
            hitEffect();
            setTimeout(clearEffect, 1000)
        }
        function hitBtn(event) {
         
            let btnDisplay = document.getElementById('normalFight');
            let topInfoDisplay = document.getElementById('topInfo')
            if (btnDisplay.innerText != '攻擊') {
                btnDisplay.innerText = '攻擊';
                topInfo.style.display = 'none';
                
               

            } else {
                btnDisplay.innerText = '取消'
                topInfo.style.display = 'block';
                topInfo.innerHTML = '請選擇攻擊對象 : ';
                chooseTarget();
                
            }
            
            
        }
        

        // 按攻擊鍵後跳出目標視窗以及可取消
        function chooseTarget(event) {
            let x = document.getElementById('centerImg');
            // 將midArea內的img存成陣列
            let monsterList = document.getElementById('midArea').getElementsByTagName('img')
            // 利用迴圈讓偵測滑鼠事件在滑鼠移過圖片時會有效果
            for(let i =0;i< monsterList.length;i++){
                monsterList[i].onmouseover = function(){
                    this.style.opacity= '0.7';
                }
                monsterList[i].onmouseout=function(){
                    this.style.opacity = '1';
                }
            }
           
            x.addEventListener('click', hitaaa);
        }


        function BossDamage() {
            let hp = 8000;

        }

    </script>
</body>

</html>